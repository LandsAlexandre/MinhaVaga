language: java

sudo: enable
dist: trusty

jdk:
 - oraclejdk8

addons:
    sonarcloud:
        organization: "helenfranca-github"
        token:
            secure: ed5e8a1e6b4beb31d271c94fe1887f0ec5470748
      
script:  
    - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar

after_success:
    - HEROKU_API_KEY=$HEROKU_API_KEY mvn clean heroku:deploy-war
branches:
  only:
    - master
    - devHelen
    - devMalu
    - devLands

notifications:
    slack: bsi-ifserra:TYWamFXEYGbYjKP2ZwLUZECP

#before_deploy:
#    - apt-get install heroku
#    - heroku
#    - heroku plugins:install heroku-cli-deploy
#deploy:
#    provider: heroku
#    api-key: 
#        secure: $HEROKU_API_KEY
#    skip_cleanup: true
#    app: minhavagaweb
#
#after_deploy:
#    - ls -R
#*/
